<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#B2F2BB" />
    <title>Dự Án - NCV Card</title>
    
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = { theme: { extend: { colors: { primary: '#B2F2BB', secondary: '#8b004f', accent: '#0033cc' } } } }
    </script>
    <style>
      body { background-color: #E5E5E5; margin: 0; padding: 0; }
      .no-scrollbar::-webkit-scrollbar { display: none; }
    </style>
  </head>
  <body>
    <div id="root"></div>

    <script type="text/babel">
      const { useState, useEffect } = React;

      // --- ICONS ---
      const Icons = {
        Home: () => <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></svg>,
        Briefcase: () => <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><rect width="20" height="14" x="2" y="7" rx="2" ry="2"/><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"/></svg>,
        ChevronLeft: () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="m15 18-6-6 6-6"/></svg>,
        Image: () => <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><rect width="18" height="18" x="3" y="3" rx="2" ry="2"/><circle cx="9" cy="9" r="2"/><path d="m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21"/></svg>
      };

      // --- DATA (Duplicated for standalone file) ---
      const DEFAULT_PROFILE = {
        id: 'default',
        assets: {
          cover: "https://images.unsplash.com/photo-1586528116311-ad8dd3c8310d?ixlib=rb-4.0.3&auto=format&fit=crop&w=1000&q=80",
          flagVi: "https://flagcdn.com/w40/vn.png",
          flagEn: "https://flagcdn.com/w40/us.png",
        },
        projects: [
          { id: 'p1', title: 'Vận chuyển siêu trường siêu trọng', thumbnail: 'https://images.unsplash.com/photo-1605218427360-69603f64ec80?auto=format&fit=crop&w=800&q=80', description: 'Dự án vận chuyển máy móc thiết bị hạng nặng cho nhà máy nhiệt điện.', images: ['https://images.unsplash.com/photo-1580674684081-7617fbf3d745?auto=format&fit=crop&w=800&q=80'] },
          { id: 'p2', title: 'Air Freight - Hàng xuất khẩu', thumbnail: 'https://images.unsplash.com/photo-1436491865332-7a61a109cc05?auto=format&fit=crop&w=800&q=80', description: 'Xử lý lô hàng xuất khẩu bằng đường hàng không.', images: ['https://images.unsplash.com/photo-1530521954074-e64f6810b32d?auto=format&fit=crop&w=800&q=80'] },
          { id: 'p3', title: 'Kho bãi và phân phối', thumbnail: 'https://images.unsplash.com/photo-1553413077-190dd305871c?auto=format&fit=crop&w=800&q=80', description: 'Giải pháp kho bãi thông minh.', images: ['https://images.unsplash.com/photo-1586528116311-ad8dd3c8310d?auto=format&fit=crop&w=800&q=80'] }
        ],
        content: {
          vi: { projectsTitle: "Dự Án Tiêu Biểu", backToProjects: "Quay lại danh sách" },
          en: { projectsTitle: "Featured Projects", backToProjects: "Back to Projects" }
        }
      };

      const loadProfile = () => {
        try {
          const stored = localStorage.getItem('ncv_cards_db');
          if (stored) {
            const profiles = JSON.parse(stored);
            const params = new URLSearchParams(window.location.search);
            const id = params.get('id');
            if (id) return profiles.find(p => p.id === id) || DEFAULT_PROFILE;
            return profiles[0] || DEFAULT_PROFILE;
          }
        } catch (e) {}
        return DEFAULT_PROFILE;
      };

      // --- PROJECTS APP ---
      const App = () => {
        const [data] = useState(loadProfile());
        const [lang, setLang] = useState('vi');
        const [selectedProject, setSelectedProject] = useState(null);

        const t = data.content[lang];

        const renderProjects = () => {
          if (selectedProject) {
            return (
              <div className="animate-slide-up text-left pt-4 px-6 pb-24">
                <button onClick={() => setSelectedProject(null)} className="flex items-center text-gray-600 mb-4 hover:text-[#0033cc] transition bg-white/50 w-fit px-3 py-1.5 rounded-full backdrop-blur-sm">
                  <Icons.ChevronLeft /> <span className="font-medium ml-1">{t.backToProjects}</span>
                </button>
                <h2 className="text-2xl font-bold text-gray-800 mb-4">{selectedProject.title}</h2>
                <div className="w-full h-64 rounded-2xl overflow-hidden shadow-md mb-6">
                  <img src={selectedProject.thumbnail} className="w-full h-full object-cover" />
                </div>
                <div className="bg-white/80 backdrop-blur p-5 rounded-xl border border-gray-100 shadow-sm mb-6">
                   <p className="text-gray-700 whitespace-pre-line">{selectedProject.description}</p>
                </div>
                <div className="space-y-4">
                  <h3 className="font-bold text-gray-800 flex items-center gap-2"><Icons.Image /> Gallery</h3>
                  {selectedProject.images?.map((img, i) => (
                    <div key={i} className="rounded-xl overflow-hidden shadow-sm"><img src={img} className="w-full h-auto" /></div>
                  ))}
                </div>
              </div>
            );
          }

          return (
            <div className="px-6 pb-24 pt-4 animate-fade-in">
              <h2 className="text-2xl font-bold text-gray-800 mb-6">{t.projectsTitle}</h2>
              <div className="grid grid-cols-2 gap-4">
                {data.projects && data.projects.map((proj) => (
                  <button key={proj.id} onClick={() => setSelectedProject(proj)} className="bg-white rounded-2xl shadow-md overflow-hidden hover:shadow-lg transition-all group text-left flex flex-col h-full">
                    <div className="aspect-square w-full overflow-hidden"><img src={proj.thumbnail} className="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110" /></div>
                    <div className="p-3 flex-1 flex flex-col justify-between">
                       <h3 className="font-bold text-gray-800 text-sm line-clamp-2 mb-1">{proj.title}</h3>
                       <div className="text-xs text-gray-500 mt-auto pt-2 border-t flex items-center gap-1">Xem chi tiết</div>
                    </div>
                  </button>
                ))}
              </div>
            </div>
          );
        };

        return (
          <div className="min-h-screen bg-[#E5E5E5]">
            <div className="container max-w-md mx-auto bg-[#B2F2BB] min-h-screen sm:min-h-[calc(100vh-40px)] sm:my-5 sm:rounded-[30px] shadow-2xl overflow-hidden flex flex-col relative">
              
              {/* NAV */}
              <div className="bg-white/95 backdrop-blur z-30 flex items-center justify-between px-4 h-14 shadow-sm shrink-0 relative">
                <div className="flex flex-1 justify-center gap-6 h-full">
                   <a href="index.html" className="h-full flex flex-col justify-center px-2 text-sm font-bold uppercase text-gray-400 hover:text-gray-600 transition-colors">
                      <div className="flex items-center gap-2"><Icons.Home /> Home</div>
                   </a>
                   <button className="h-full flex flex-col justify-center px-2 text-sm font-bold uppercase text-[#8b004f] relative">
                      <div className="flex items-center gap-2"><Icons.Briefcase /> Project</div>
                      <div className="absolute bottom-0 left-0 w-full h-1 bg-[#8b004f] rounded-t-full"></div>
                   </button>
                </div>
                <div className="flex gap-2 absolute right-4">
                   <button onClick={() => setLang('vi')} className={`w-7 h-5 rounded overflow-hidden transition-transform ${lang==='vi'?'ring-1 ring-green-500':'opacity-60'}`}><img src={data.assets.flagVi} className="w-full h-full object-cover"/></button>
                   <button onClick={() => setLang('en')} className={`w-7 h-5 rounded overflow-hidden transition-transform ${lang==='en'?'ring-1 ring-green-500':'opacity-60'}`}><img src={data.assets.flagEn} className="w-full h-full object-cover"/></button>
                </div>
              </div>

              {/* CONTENT */}
              <div className="flex-1 overflow-y-auto no-scrollbar flex flex-col">
                <div className="w-full h-48 relative shrink-0">
                  <img src={data.assets.cover} className="w-full h-full object-cover" />
                  <div className="absolute bottom-0 left-0 w-full h-24 bg-gradient-to-t from-[#B2F2BB] via-[#B2F2BB]/60 to-transparent"></div>
                </div>
                <div className="relative z-10 -mt-24 flex-1">
                  {renderProjects()}
                </div>
              </div>
            </div>
          </div>
        );
      };

      const root = ReactDOM.createRoot(document.getElementById('root'));
      root.render(<App />);
    </script>
  </body>
</html>